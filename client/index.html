<!DOCTYPE html>
<html lang="en">

<head>
  <title>Chatroom</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">


</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <ul id="messages"></ul>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <form action="">
          <div class="input-group">
            <input id="m" autocomplete="off" type="text" class="form-control" placeholder="Message..."
              aria-label="Message...">
            <span class="input-group-btn">
              <button class="btn btn-secondary" type="submit">Send</button>
            </span>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script> -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
    integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
    integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
    crossorigin="anonymous"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const room = 'javascript';
    //So basically the server will be expecting another event. And once that other event comes in, data from that particular event will be passed to the console log.
    // const socket = io.connect('http://localhost:3000');
    const socket = io('/tech');

    // document.getElementById('messageSend').addEventListener("click", function () {
    //     socket.emit('message', document.getElementById('messageSend').value);
    //     return false;
    // })

    $('form').submit(() => {
      let msg = $('#m').val();
      socket.emit('message', { msg, room });
      $('#m').val('');
      return false;
    });

    socket.on('connect', () => {
      socket.emit('join', { room: room });
    })

    socket.on('message', (msg) => {
      $('#messages').append($('<li>').text(msg));
    })

        //So when we get a message from the server so remember the server is going to send us a message when we connect. Take the data that he's going to pass to us and console log it for now. put this inside of our HTML.

        // socket.on('message', (data) => {
        //     console.log(data);

            //So make sure that whatever event you put in here, if you want to emit to another event, you want to make sure that on the server that receives that message, has the same value here.
        //     socket.emit('another event', { jem: 'I am great thank u' });
        // })
  </script>
</body>

</html>